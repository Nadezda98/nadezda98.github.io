<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Парфюм</title>
    <style>
        * {
            padding: 0;
            margin: 0;
        }
        body {
            --scrollbar-width: 0px;
            font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;
            color: rgba(0,0,0,0.4);
            font-size: 18px;
        }
        body.open-modal {
            overflow: hidden;
            padding-right: var(--scrollbar-width);
        }
        img {
            display: block;
            max-width: 100%;
            cursor: pointer;
            margin-top: 12px;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 48px 24px;
        }
        main {
            position: relative;
            margin: auto;
            padding: 64px 24px;
            max-width: 960px;
        }
        .image {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .light-box {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.6);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .light-box > img {
            max-width: 90%;
            max-height: 90%;
        }
        .light-box > .close-button {
            position: absolute;
            top: 0;
            right: 0;
        }
        .light-box.closed {
            display: none;
        }
        .close-button {
            all: unset;
            color: white;
            margin: 20px;
            font-size: 3rem; 
            line-height: 3rem;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <main>
        <section class="grid" id="gallery">
            <div class="image">
                <span>1.</span>
                <a class='gallery-item' href="/images/parfume/grid/photo1.jpeg">
                    <img src="/images/parfume/grid/photo1.jpeg" alt="">
                </a>
            </div>
            <div class="image">
                <span>2.</span>
                <a class='gallery-item' href="/images/parfume/grid/photo2.jpeg">
                    <img src="/images/parfume/grid/photo2.jpeg" alt="">
                </a>
            </div>
            <div class="image">
                <span>3.</span>
                <a class='gallery-item' href="/images/parfume/grid/photo3.jpeg">
                    <img src="/images/parfume/grid/photo3.jpeg" alt="">
                </a>
            </div>
            <div class="image">
                <span>4.</span>
                <a class='gallery-item' href="/images/parfume/grid/photo4.jpeg">
                    <img src="/images/parfume/grid/photo4.jpeg" alt="">
                </a>
            </div>
            <div class="image">
                <span>5.</span>
                <a class='gallery-item' href="/images/parfume/grid/photo5.jpeg">
                    <img src="/images/parfume/grid/photo5.jpeg" alt="">
                </a>
            </div>
            <div class="image">
                <span>6.</span>
                <a class='gallery-item' href="/images/parfume/grid/photo6.jpeg">
                    <img src="/images/parfume/grid/photo6.jpeg" alt="">
                </a>
            </div>
            <div class="image">
                <span>7.</span>
                <a class='gallery-item' href="/images/parfume/grid/photo1.jpeg">
                    <img src="/images/parfume/grid/photo7.jpeg" alt="">
                </a>
            </div>
            <div class="image">
                <span>8.</span>
                <a class='gallery-item' href="/images/parfume/grid/photo8.jpeg">
                    <img src="/images/parfume/grid/photo8.jpeg" alt="">
                </a>
            </div>
            <div class="image">
                <span>9.</span>
                <a class='gallery-item' href="/images/parfume/grid/photo9.jpeg">
                    <img src="/images/parfume/grid/photo9.jpeg" alt="">
                </a>
            </div>
            <div class="image">
                <span>10.</span>
                <a class='gallery-item' href="/images/parfume/grid/photo10.jpeg">
                    <img src="/images/parfume/grid/photo10.jpeg" alt="">
                </a>
            </div>
            <div class="image">
                <span>11.</span>
                <a class='gallery-item' href="/images/parfume/grid/photo11.jpeg">
                    <img src="/images/parfume/grid/photo11.jpeg" alt="">
                </a>
            </div>
            <div class="image">
                <span>12.</span>
                <a class='gallery-item' href="/images/parfume/grid/photo12.jpeg">
                    <img src="/images/parfume/grid/photo12.jpeg" alt="">
                </a>
            </div>
        </section>
        <div id="light-box" class='light-box closed'>
            <button class="close-button">&times;</button>
        </div>
    </main>
    <script>
        function getScrollbarWidth() {
          // Creating invisible container
          const outer = document.createElement('div');
          outer.style.visibility = 'hidden';
          outer.style.overflow = 'scroll'; // forcing scrollbar to appear
          outer.style.msOverflowStyle = 'scrollbar'; // needed for WinJS apps
          document.body.appendChild(outer);

          // Creating inner element and placing it in the container
          const inner = document.createElement('div');
          outer.appendChild(inner);

          // Calculating difference between container's full width and the child width
          const scrollbarWidth = outer.offsetWidth - inner.offsetWidth;

          // Removing temporary elements from the DOM
          outer.parentNode.removeChild(outer);

          return scrollbarWidth;
        };

        document.body.style.setProperty(
            '--scrollbar-width',
            getScrollbarWidth() + 'px'
        );

        Array.from(document.querySelectorAll('.gallery-item')).forEach(item => {
            item.addEventListener('click', e => {
                e.preventDefault();
                open(e.target.href || e.target.src);
                return false;
            })
        });

        function open(src) {
            window.location.hash = encodeURIComponent(src.split('/images/parfume/grid/')[1]);
            document.body.classList.add('open-modal');
            document.getElementById('light-box').classList.remove('closed');
            const box = document.getElementById('light-box');
            const img = document.createElement('img');
            img.src = src;
            box.appendChild(img);
        }

        function close() {
            window.location.hash = '';
            document.body.classList.remove('open-modal');
            document.getElementById('light-box').classList.add('closed');
            document.getElementById('light-box').removeChild(document.querySelector('#light-box > img'));
        }

        document.addEventListener('keydown', e => {
            if (e.key === 'Escape') close();
        });

        document.querySelector('.close-button').addEventListener('click', close);

        document.querySelector('#light-box').addEventListener('click', e => {
            if (e.target.id === 'light-box') {
                close();
            }
        });
        if (window.location.hash && window.location.hash.slice(1)) {
            open('/images/parfume/grid/' + decodeURIComponent(window.location.hash.slice(1)));
        }
    </script>
</body>
</html>